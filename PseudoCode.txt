
transaction-categorization-api/        ← PROJECT ROOT (the whole project)
│
├── README.md                           ← explains the project
├── pyproject.toml                     ← Python dependencies
├── .gitignore
├── .env.example
│
├── app/                               ← ALL application code lives here
│   │
│   ├── main.py                        ← app entry point (FastAPI starts here)
│   ├── __init__.py
│   │
│   ├── core/                          ← config / settings
│   │   ├── config.py
│   │   └── __init__.py
│   │
│   ├── db/                            ← database setup (engine, session)
│   │   ├── base.py
│   │   ├── session.py
│   │   └── __init__.py
│   │
│   ├── models/                        ← SQLAlchemy models (tables)
│   │   ├── transaction.py
│   │   └── __init__.py
│   │
│   ├── schemas/                       ← Pydantic models (API inputs/outputs)
│   │   ├── transaction.py
│   │   └── __init__.py
│   │
│   ├── services/                      ← business logic (no HTTP, no DB)
│   │   ├── categorizer.py
│   │   └── __init__.py
│   │
│   └── api/                           ← HTTP layer
│       │
│       ├── routes/                    ← URL endpoints live here
│       │   ├── transactions.py
│       │   ├── health.py
│       │   └── __init__.py
│       │
│       └── __init__.py
│
└── tests/                             ← tests (same structure idea)
    ├── test_transactions.py
    ├── test_categorizer.py
    └── __init__.py








app/core/config.py
DEFINE a Settings container for configuration values
SET default application name
SET default database URL
SET .env file as configuration source

CREATE a settings object
READ values from environment variables if present
FALL BACK to default values if missing

app/db/base.py
CREATE a shared ORM Base class
REGISTER table metadata under the Base class
STORE Base for use by all database table models

app/db/session.py
LOAD application settings

CREATE database engine using database URL
ALLOW database to be accessed by multiple operations

CREATE a session factory
DISABLE automatic commits
DISABLE automatic flushes
ATTACH session factory to database engine

STORE session factory for reuse

app/models/transaction.py
DEFINE a database table named "transactions"

FOR each transaction record
STORE a unique identifier
STORE a numeric amount
STORE a merchant name as text
STORE a category label as text
STORE a calendar date

app/schemas/transaction.py
DEFINE a data structure for creating a transaction
REQUIRE a numeric amount
REQUIRE a merchant name
REQUIRE a calendar date

DEFINE a data structure for returning a transaction
INCLUDE a unique identifier
INCLUDE a numeric amount
INCLUDE a merchant name
INCLUDE a category label
INCLUDE a calendar date

ALLOW database objects to be converted into response format

DEFINE a data structure for returning a monthly summary
INCLUDE a month string
INCLUDE a transaction count
INCLUDE an overall total
INCLUDE category totals as a mapping of category to total

app/services/categorizer.py
RECEIVE merchant name as input

CONVERT merchant name to lowercase

IF merchant matches food-related keywords
RETURN "Food & Dining"

IF merchant matches transportation-related keywords
RETURN "Transportation"

IF merchant matches grocery-related keywords
RETURN "Groceries"

RETURN default category "Uncategorized"

app/api/routes/health.py
CREATE a router for health endpoints

WHEN a GET request is made to "/health"
RETURN a response indicating the service is healthy

app/api/routes/transactions.py
CREATE a router for transaction endpoints with base path "/transactions"

DEFINE a function to get a database session
OPEN a database session
PROVIDE session to request
CLOSE session after request completes

WHEN a POST request is made to "/transactions"
RECEIVE transaction input data
DETERMINE category using categorization logic
CREATE a transaction record
SAVE record to database
RETURN the saved transaction

WHEN a GET request is made to "/transactions"
OPTIONALLY receive start and end dates
QUERY transactions from database
APPLY date filters if provided
RETURN list of matching transactions

WHEN a GET request is made to "/transactions/summary"
RECEIVE month string in format "YYYY-MM"
LOAD transactions from database
FILTER transactions that match the requested month
GROUP amounts by category
COMPUTE overall total across categories
RETURN the monthly summary object

app/main.py
CREATE web application instance

CONNECT database engine
CREATE database tables if they do not exist

REGISTER health check routes
REGISTER transaction routes

WHEN a GET request is made to "/"
RETURN a basic status response