<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Toodle - Organize Your Tasks</title>
    
    <meta name="description" content="Toodle - A beautiful to-do list app to organize your day, week, and month">
    
    <!-- App Icons -->
    <link rel="icon" type="image/svg+xml" href="icons/icon.svg">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&family=Pacifico&display=swap" rel="stylesheet">
</head>
<body>
    <script>
        // Check if user is logged in
        if (!localStorage.getItem('currentUser')) {
            window.location.href = 'login.html';
        }
    </script>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1>Toodle</h1>
            <div class="header-actions">
                <div class="view-dropdown-container">
                    <button class="header-btn" id="menuBtn" title="Menu">
                        View
                    </button>
                    <!-- Dropdown Menu -->
                    <div class="dropdown-menu" id="dropdownMenu">
                        <div class="dropdown-section">
                            <button class="view-option active" data-view="day">
                                <i class="fas fa-calendar-day"></i> Day
                            </button>
                            <button class="view-option" data-view="week">
                                <i class="fas fa-calendar-week"></i> Week
                            </button>
                            <button class="view-option" data-view="month">
                                <i class="fas fa-calendar-alt"></i> Month
                            </button>
                        </div>
                    </div>
                </div>
                <button class="header-btn" id="addTaskBtn" title="Add Task">
                    Add Task
                </button>
                <div class="profile-icon" id="profileIcon" title="Profile">
                    <!-- JS will fill initial and tooltip -->
                </div>
            </div>
        </header>

        <!-- Statistics -->
        <div class="stats-container">
            <div class="stat-card">
                <span class="stat-number" id="totalCount">0</span>
                <span class="stat-label">Total</span>
            </div>
            <div class="stat-card">
                <span class="stat-number stat-active" id="activeCount">0</span>
                <span class="stat-label">Active</span>
            </div>
            <div class="stat-card">
                <span class="stat-number stat-done" id="completedCount">0</span>
                <span class="stat-label">Completed</span>
            </div>
        </div>

        <!-- Date Navigation -->
        <div class="date-navigation">
            <button class="nav-btn" id="prevBtn">
                <i class="fas fa-chevron-left"></i>
            </button>
            <h2 class="current-date" id="currentDateLabel">Today</h2>
            <button class="nav-btn" id="nextBtn">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>

        <!-- Filter Tabs -->
        <div class="filter-container">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="active">Active</button>
            <button class="filter-btn" data-filter="completed">Completed</button>
        </div>

        <!-- Day View: Task List -->
        <div class="day-view" id="dayView">
            <div class="task-list" id="taskList">
                <!-- Tasks will be rendered here -->
            </div>
        </div>

        <!-- Week View: Time-based Calendar Grid -->
        <div class="week-view" id="weekView" style="display: none;">
            <div class="week-schedule" id="weekSchedule">
                <!-- Will be rendered by JavaScript -->
            </div>
        </div>

        <!-- Month View: Calendar Grid -->
        <div class="month-view" id="monthView" style="display: none;">
            <div class="month-header">
                <div class="month-day-header">Sun</div>
                <div class="month-day-header">Mon</div>
                <div class="month-day-header">Tue</div>
                <div class="month-day-header">Wed</div>
                <div class="month-day-header">Thu</div>
                <div class="month-day-header">Fri</div>
                <div class="month-day-header">Sat</div>
            </div>
            <div class="month-grid" id="monthGrid">
                <!-- Month days will be rendered here -->
            </div>
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState">
            <i class="fas fa-clipboard-list"></i>
            <h3>No Tasks Yet</h3>
            <p>Tap + to add your first task</p>
        </div>
    </div>

    <!-- Add/Edit Task Modal -->
    <div class="modal-overlay" id="taskModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modalTitle">New Task</h2>
                <button class="close-btn" id="closeModalBtn">
                    Ã—
                </button>
            </div>
            <div class="modal-content">
                <form id="taskForm">
                    <input type="hidden" id="taskId">
                    
                    <div class="form-group">
                        <label for="taskTitle">Title</label>
                        <input type="text" id="taskTitle" placeholder="Task title" required>
                    </div>

                    <div class="form-group">
                        <label for="taskDescription">Description</label>
                        <textarea id="taskDescription" placeholder="Add more details (optional)" rows="3"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group form-group-half">
                            <label for="taskStartDate">Start Date</label>
                            <input type="date" id="taskStartDate">
                        </div>
                        <div class="form-group form-group-half">
                            <label for="taskStartTime">Time</label>
                            <select id="taskStartTime" class="time-select">
                                <option value="">No time</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group form-group-half">
                            <label for="taskDueDate">Due Date</label>
                            <input type="date" id="taskDueDate">
                        </div>
                        <div class="form-group form-group-half">
                            <label for="taskDueTime">Time</label>
                            <select id="taskDueTime" class="time-select">
                                <option value="">No time</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Priority</label>
                        <div class="priority-selector">
                            <button type="button" class="priority-btn" data-priority="low">Low</button>
                            <button type="button" class="priority-btn active" data-priority="medium">Medium</button>
                            <button type="button" class="priority-btn" data-priority="high">High</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Category</label>
                        <div class="category-selector" id="categorySelector">
                            <!-- Categories will be loaded dynamically -->
                            <button type="button" class="add-category-btn" id="addCategoryBtn">+ Add Category</button>
                        </div>
                        <div class="new-category-input" id="newCategoryInput">
                            <input type="text" id="newCategoryName" placeholder="Enter category name">
                            <label class="color-label">Pick a color:</label>
                            <div class="color-picker-container" id="colorPicker">
                                <div class="color-option color-0" data-color="0"></div>
                                <div class="color-option color-1" data-color="1"></div>
                                <div class="color-option color-2" data-color="2"></div>
                                <div class="color-option color-3" data-color="3"></div>
                                <div class="color-option color-4" data-color="4"></div>
                                <div class="color-option color-5" data-color="5"></div>
                                <div class="color-option color-6" data-color="6"></div>
                                <div class="color-option color-7" data-color="7"></div>
                                <div class="color-option color-8" data-color="8"></div>
                                <div class="color-option color-9" data-color="9"></div>
                            </div>
                            <div class="category-actions">
                                <button type="button" id="saveCategoryBtn">Save</button>
                                <button type="button" id="cancelCategoryBtn">Cancel</button>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save</button>
                    </div>

                    <button type="button" class="btn btn-danger" id="deleteTaskBtn" style="display: none;">
                        <i class="fas fa-trash"></i> Delete Task
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal modal-small">
            <h3>Delete Task</h3>
            <p>Are you sure you want to delete this task? This action cannot be undone.</p>
            <div class="form-actions">
                <button class="btn btn-secondary" id="cancelDeleteBtn">Cancel</button>
                <button class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>

</body>
</html>
